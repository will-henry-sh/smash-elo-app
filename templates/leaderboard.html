<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Smash Ultimate Leaderboard</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>

  <body>
    <div class="container leaderboard-container">
      <h1>Smash Ultimate Leaderboard</h1>
      <a href="/matches" class="nav-link">‚Üê Match Submission</a>

      <table>
        <tr>
          <th>Rank</th>
          <th>Player</th>
          <th>Global ELO</th>
        </tr>

        {% for player, rating, char_map in rows %}
        <tr>
          <!-- Rank -->
          <td class="rank-col">
            {% if loop.index == 1 %}
            <span class="rank-gold">{{ loop.index }}</span>
            {% elif loop.index == 2 %}
            <span class="rank-silver">{{ loop.index }}</span>
            {% elif loop.index == 3 %}
            <span class="rank-bronze">{{ loop.index }}</span>
            {% else %}
            <span class="rank-normal">{{ loop.index }}</span>
            {% endif %}
          </td>

          <!-- Player -->
          <td>
            {% if loop.index == 1 %}
            <a href="/player/{{ player }}" class="rank-gold">{{ player }}</a>
            {% elif loop.index == 2 %}
            <a href="/player/{{ player }}" class="rank-silver">{{ player }}</a>
            {% elif loop.index == 3 %}
            <a href="/player/{{ player }}" class="rank-bronze">{{ player }}</a>
            {% else %}
            <a href="/player/{{ player }}" class="rank-normal">{{ player }}</a>
            {% endif %}
          </td>

          <!-- Global ELO -->
          <td class="rating-value">{{ rating }}</td>
        </tr>
        {% endfor %}
      </table>

      <!-- Last Match Result (added under leaderboard) -->
      {% if last_match %}
      <div class="result-box">
        <h2>Last Match Result</h2>

        <p>
          <strong>{{ last_match.p1_name }} ({{ last_match.p1_char }}):</strong>
          {{ last_match.p1_elo }} {% if last_match.p1_change > 0 %}
          <span class="green">+{{ last_match.p1_change }}</span>
          {% else %}
          <span class="red">{{ last_match.p1_change }}</span>
          {% endif %}
        </p>

        <p>
          <strong>{{ last_match.p2_name }} ({{ last_match.p2_char }}):</strong>
          {{ last_match.p2_elo }} {% if last_match.p2_change > 0 %}
          <span class="green">+{{ last_match.p2_change }}</span>
          {% else %}
          <span class="red">{{ last_match.p2_change }}</span>
          {% endif %}
        </p>
      </div>
      {% endif %}
    </div>
  </body>
</html>
