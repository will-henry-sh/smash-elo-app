<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ name }}</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>

  <body>
    <div class="container">
      <h1>{{ name }}</h1>

      <a href="/leaderboard" class="nav-link">← Back to Leaderboard</a>

      <!-- Player Match Stats -->
      <div class="player-stats-box">
        <h2>Player Data</h2>

        <p><strong>Total Matches:</strong> {{ total_matches }}</p>
        <p><strong>Wins:</strong> {{ wins }}</p>
        <p><strong>Losses:</strong> {{ losses }}</p>
        <p><strong>Win Percentage:</strong> {{ win_rate }}%</p>
      </div>

      <!-- BADGES SECTION -->
      {% if badges %}
      <div class="badge-section">
        <h2 class="badge-header">Badges</h2>

        <div class="badge-grid">
          {% for badge in badges %}
          <div class="badge-wrapper" onclick="toggleBadge(this)">
            <img
              src="{{ badge.icon }}"
              class="player-badge-icon"
              alt="{{ badge.name }}"
            />

            <div class="badge-popup">
              {{ badge.name }}<br />
              {{ badge.description }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Character count -->
      <p><strong>Total Characters Played:</strong> {{ total_chars }}</p>

      {% if best_char %}
      <p>
        <strong>Best Character:</strong> {{ best_char }} ({{ char_map[best_char]
        }})
      </p>
      <p>
        <strong>Worst Character:</strong> {{ worst_char }} ({{
        char_map[worst_char] }})
      </p>
      {% else %}
      <p>This player hasn’t recorded any matches yet.</p>
      {% endif %}

      <table>
        <tr>
          <th>Character</th>
          <th>ELO</th>
        </tr>

        {% for char, elo in char_map.items() %}
        <tr>
          <td>{{ char }}</td>
          <td>{{ elo }}</td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <script>
      function toggleBadge(wrapper) {
        wrapper.classList.toggle("active");
      }
    </script>
  </body>
</html>
